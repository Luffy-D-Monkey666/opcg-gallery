# 集换社 (Jihuanshe) 数据采集调研报告

**调研时间**: 2025-01-29  
**调研目标**: 验证集换社价格数据采集的可行性  
**调研状态**: 🟡 需要进一步测试

---

## 1. 平台概况

| 项目 | 信息 |
|------|------|
| **网址** | https://www.jihuanshe.com |
| **定位** | 中国卡牌交易平台（TCG focused） |
| **数据类型** | 卡牌交易价格、历史成交记录 |
| **覆盖范围** | ONE PIECE、宝可梦、游戏王等 |

---

## 2. 技术架构分析

### 2.1 网站技术栈
```
- 前端框架: React (SPA 单页应用)
- 渲染方式: 客户端渲染 (CSR)
- API 通信: RESTful API
- 反爬措施: 中等
```

### 2.2 初步测试结果

#### 测试 1: 直接页面抓取
```bash
GET https://www.jihuanshe.com/search?keyword=OP01-001
```
**结果**: 页面返回 HTML，但价格数据由 JavaScript 动态加载

#### 测试 2: API 接口探测
```bash
GET https://www.jihuanshe.com/api/market/search?keyword=OP01-001
```
**结果**: 返回错误页面，接口路径不正确

---

## 3. 可行方案评估

### 方案 A: 无头浏览器抓取 (Puppeteer/Playwright)

| 评估项 | 结果 |
|--------|------|
| **可行性** | ✅ 高 |
| **复杂度** | 中等 |
| **稳定性** | 中等 |
| **成本** | 需要服务器运行浏览器 |
| **反爬风险** | 需要处理验证码、IP限制 |

**实现方式**:
```javascript
// 使用 Puppeteer 模拟浏览器
const browser = await puppeteer.launch();
const page = await browser.newPage();
await page.goto('https://www.jihuanshe.com/search?keyword=OP01-001');
// 等待数据加载，提取价格信息
```

### 方案 B: 逆向 API 接口

| 评估项 | 结果 |
|--------|------|
| **可行性** | 🟡 待验证 |
| **复杂度** | 高 |
| **稳定性** | 高（如果找到稳定接口） |
| **成本** | 低 |
| **反爬风险** | 中等 |

**下一步**: 通过浏览器 DevTools 抓包分析真实 API 接口

### 方案 C: 官方合作/API 申请

| 评估项 | 结果 |
|--------|------|
| **可行性** | 🟡 未知 |
| **复杂度** | 低（如果有开放 API） |
| **稳定性** | 最高 |
| **成本** | 可能需要商业合作 |
| **反爬风险** | 无 |

**下一步**: 联系集换社商务团队咨询 API 合作

---

## 4. 推荐方案

### 短期（预览版）
**使用模拟数据 + 手动更新**
- 价格图表使用模拟数据展示效果
- 你手动提供价格数据，我录入系统
- 快速验证产品形态

### 中期（MVP）
**无头浏览器自动化采集**
- 部署 Puppeteer 服务
- 每日定时采集价格数据
- 存储到数据库

### 长期（正式版）
**官方 API 合作**
- 联系集换社申请官方数据接口
- 或建立商业合作关系
- 最稳定、合法的数据来源

---

## 5. 风险与对策

| 风险 | 可能性 | 对策 |
|------|--------|------|
| 集换社封禁 IP | 中 | 使用代理池轮换 IP |
| 网站改版 | 中 | 监控页面变化，自动告警 |
| 需要登录验证 | 中 | 模拟登录或使用 Cookie |
| 法律风险 | 低 | 仅采集公开价格数据，不爬取用户隐私 |

---

## 6. 下一步行动

### 立即执行
1. [ ] 深入抓包分析（使用浏览器 DevTools）
2. [ ] 测试 Puppeteer 抓取可行性
3. [ ] 撰写邮件联系集换社 API 合作

### 备选方案
如果集换社采集困难：
- 考虑其他数据源：闲鱼、淘宝、 eBay
- 或改为用户自主上报价格
- 或仅展示官方指导价（从 OPCG 官网获取）

---

## 7. 结论

**当前状态**: 🟡 黄色 - 需要进一步验证

**建议**: 
- 当前阶段使用 **模拟数据** 展示价格图表功能
- 并行进行 **集换社 API 调研**
- 如果采集困难，考虑 **官方合作** 或 **用户众包** 模式

**预期时间**:
- 完整技术方案: 2-3 天
- 正式数据采集: 1-2 周（含测试）
